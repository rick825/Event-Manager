{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./Profile.css';import{useUserContext}from'../context/UserContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{UserId}=useUserContext();const[file,setFile]=useState(null);const[showEventForm,setShowEventForm]=useState(false);const[user,setUser]=useState(null);// Initialize as null\nconst handleFileChange=event=>{setFile(event.target.files[0]);};useEffect(()=>{axios.get(\"/api/getUserData/\".concat(UserId)).then(res=>{setUser(res.data);}).catch(err=>console.error(\"Error getting user data\",err));},[UserId]);const handleUpload=async e=>{try{e.preventDefault();const formData=new FormData();formData.append('profile',file);formData.append('UserId',UserId);await axios.post('/api/uploadPhoto',formData,{headers:{'Content-Type':'multipart/form-data'}});alert('Image uploaded successfully');}catch(error){console.error('Error uploading image:',error);alert('Error uploading image. Please try again later.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"dash profile\",children:user&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-top profile-cont\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-top-head\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://images.pexels.com/photos/1029604/pexels-photo-1029604.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-cover-button profile-button\",children:/*#__PURE__*/_jsx(\"button\",{children:\"\\uD83D\\uDD8B Edit Cover\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-top-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-pic\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic-main\",children:user.profile&&user.profile.data&&user.profile.contentType&&/*#__PURE__*/_jsx(\"img\",{src:\"data:\".concat(user.profile.contentType,\";base64,\").concat(user.profile.data),alt:\"Profile\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic-button profile-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEventForm(true),children:\"+\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[user.fname,\" \",user.lname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone:\"}),\" \",user.mobilenumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Email:\"}),\" \",user.email]})]})]}),showEventForm&&/*#__PURE__*/_jsx(\"div\",{className:\"addform\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpload,className:\"eventform\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formhead\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please Enter below Details:-\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"Close\",onClick:()=>setShowEventForm(false),children:\"X\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".png, .jpg, .jpeg\",name:\"profile\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{children:\"Upload\"})]})})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","axios","useUserContext","jsx","_jsx","jsxs","_jsxs","Profile","UserId","file","setFile","showEventForm","setShowEventForm","user","setUser","handleFileChange","event","target","files","get","concat","then","res","data","catch","err","console","error","handleUpload","e","preventDefault","formData","FormData","append","post","headers","alert","className","children","src","alt","profile","contentType","onClick","fname","lname","mobilenumber","email","onSubmit","type","accept","name","onChange"],"sources":["F:/Work/Prepinsta/Project/event-manager/src/component/presentational/Dashboard/Profile/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Profile.css';\r\nimport { useUserContext } from '../context/UserContext';\r\n\r\nconst Profile = () => {\r\n  const { UserId } = useUserContext();\r\n  const [file, setFile] = useState(null);\r\n  const [showEventForm, setShowEventForm] = useState(false);\r\n  const [user, setUser] = useState(null); // Initialize as null\r\n\r\n  const handleFileChange = (event) => {\r\n    setFile(event.target.files[0]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get(`/api/getUserData/${UserId}`)\r\n      .then((res) => {\r\n        setUser(res.data);\r\n      })\r\n      .catch((err) => console.error(\"Error getting user data\", err));\r\n  }, [UserId]);\r\n\r\n  const handleUpload = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const formData = new FormData();\r\n      formData.append('profile', file);\r\n      formData.append('UserId', UserId);\r\n      await axios.post('/api/uploadPhoto', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      alert('Image uploaded successfully');\r\n    } catch (error) {\r\n      console.error('Error uploading image:', error);\r\n      alert('Error uploading image. Please try again later.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='dash profile'>\r\n      {user && (\r\n        <div className=\"profile-top profile-cont\">\r\n          <div className=\"profile-top-head\">\r\n            <img src=\"https://images.pexels.com/photos/1029604/pexels-photo-1029604.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\" alt=\"\" />\r\n            <div className=\"edit-cover-button profile-button\">\r\n              <button>ðŸ–‹ Edit Cover</button>\r\n            </div>\r\n          </div>\r\n          <div className=\"profile-top-info\">\r\n            <div className=\"profile-pic\">\r\n              <div className=\"profile-pic-main\">\r\n              {user.profile && user.profile.data && user.profile.contentType && (\r\n                   <img src={`data:${user.profile.contentType};base64,${user.profile.data}`} alt=\"Profile\" />\r\n              )}\r\n              </div>\r\n              <div className=\"profile-pic-button profile-button\">\r\n                <button onClick={() => setShowEventForm(true)}>+</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-info\">\r\n              <h2>{user.fname} {user.lname}</h2>\r\n              <p><span>Phone:</span> {user.mobilenumber}</p>\r\n              <p><span>Email:</span> {user.email}</p>\r\n            </div>\r\n          </div>\r\n          {showEventForm && (\r\n            <div className=\"addform\">\r\n              <form onSubmit={handleUpload} className='eventform'>\r\n                <div className=\"formhead\">\r\n                  <h2>Please Enter below Details:-</h2>\r\n                  <h2 className='Close' onClick={() => setShowEventForm(false)}>X</h2>\r\n                </div>\r\n                <input type=\"file\" accept=\".png, .jpg, .jpeg\" name=\"profile\" onChange={handleFileChange} />\r\n                <button>Upload</button>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}